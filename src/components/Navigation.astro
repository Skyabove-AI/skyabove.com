---
const links = [
  { text: "Services", href: "/services" },
  { text: "How We Work", href: "/how-we-work" },
  { text: "Results", href: "/results" },
  { text: "About", href: "/about" },
  { text: "Insights", href: "/insights" },
];
---

<header class="fixed top-6 left-0 right-0 z-50 flex justify-center px-4">
  <div
    id="main-nav"
    class="relative flex items-center justify-between w-full max-w-5xl px-6 py-3 bg-white/5 backdrop-blur-xl border border-white/10 rounded-full shadow-2xl transition-all duration-300"
  >
    <a
      href="/"
      class="text-xl font-bold tracking-tighter text-white z-50 flex items-center space-x-2"
    >
      <img src="/logo.png" alt="SkyAbove Logo" class="w-8 h-8 object-contain" />
      <span>SkyAbove</span>
    </a>

    <!-- Desktop Nav -->
    <nav class="hidden md:flex items-center space-x-1">
      <!-- Services -->
      <a
        href="/services"
        class="px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-white/5 rounded-full transition-all duration-200"
      >
        Services
      </a>

      <!-- AI Consulting -->
      <a
        href="/ai-consulting"
        class="px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-white/5 rounded-full transition-all duration-200"
      >
        AI Consulting
      </a>

      <!-- Industries Dropdown -->
      <div class="relative group">
        <button
          class="dropdown-trigger flex items-center space-x-1 px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-white/5 rounded-full transition-all duration-200 focus:outline-none"
        >
          <span>Industries</span>
          <svg
            class="dropdown-arrow w-3 h-3 transition-transform duration-200 opacity-50"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            ><path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"></path></svg
          >
        </button>

        <!-- Dropdown Menu -->
        <div
          class="absolute left-1/2 -translate-x-1/2 mt-2 w-64 bg-[#0A0A0A]/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-xl hidden flex-col p-2 space-y-1 opacity-0 translate-y-2 transition-all duration-200 origin-top z-[60]"
        >
          <a
            href="/industries/home-services"
            class="flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-white/5 group/item transition-colors"
          >
            <span class="text-lg opacity-70">üè†</span>
            <div>
              <div class="text-white font-medium text-sm">Home Services</div>
            </div>
          </a>
          <a
            href="/industries/legal"
            class="flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-white/5 group/item transition-colors"
          >
            <span class="text-lg opacity-70">‚öñÔ∏è</span>
            <div>
              <div class="text-white font-medium text-sm">Legal</div>
            </div>
          </a>
          <a
            href="/industries/political"
            class="flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-white/5 group/item transition-colors"
          >
            <span class="text-lg opacity-70">üó≥Ô∏è</span>
            <div>
              <div class="text-white font-medium text-sm">Political</div>
            </div>
          </a>
          <a
            href="/industries/ecommerce"
            class="flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-white/5 group/item transition-colors"
          >
            <span class="text-lg opacity-70">üì¶</span>
            <div>
              <div class="text-white font-medium text-sm">E-commerce</div>
            </div>
          </a>
        </div>
      </div>

      <a
        href="/how-we-work"
        class="px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-white/5 rounded-full transition-all duration-200"
      >
        How We Work
      </a>

      <a
        href="/results"
        class="px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-white/5 rounded-full transition-all duration-200"
      >
        Results
      </a>

      <a
        href="/insights"
        class="px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-white/5 rounded-full transition-all duration-200"
      >
        Insights
      </a>
    </nav>

    <!-- CTA & Mobile Trigger -->
    <div class="flex items-center space-x-4">
      <a
        href="/contact"
        class="hidden md:inline-flex items-center justify-center px-5 py-2 text-sm font-medium text-black bg-white rounded-full hover:bg-gray-200 transition-all duration-200 shadow-[0_0_15px_rgba(255,255,255,0.3)] hover:shadow-[0_0_20px_rgba(255,255,255,0.5)]"
      >
        Book Strategy
        <svg
          class="w-3 h-3 ml-2"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          ><path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg
        >
      </a>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-btn"
        class="md:hidden flex flex-col justify-center items-center w-10 h-10 space-y-1.5 focus:outline-none z-50 group"
        aria-label="Toggle menu"
      >
        <span
          class="w-6 h-0.5 bg-white transition-all duration-300 origin-center group-[.active]:rotate-45 group-[.active]:translate-y-2"
        ></span>
        <span
          class="w-6 h-0.5 bg-white transition-all duration-300 group-[.active]:opacity-0"
        ></span>
        <span
          class="w-6 h-0.5 bg-white transition-all duration-300 origin-center group-[.active]:-rotate-45 group-[.active]:-translate-y-2"
        ></span>
      </button>
    </div>
  </div>

  <!-- Mobile Nav Overlay -->
  <div
    id="mobile-nav"
    class="fixed inset-0 bg-black/95 backdrop-blur-xl z-40 translate-x-full transition-transform duration-300 md:hidden flex items-center justify-center"
  >
    <nav class="flex flex-col items-center space-y-6">
      <a
        href="/services"
        class="text-3xl font-bold text-white hover:text-purple-400 transition-colors"
        >Services</a
      >
      <a
        href="/ai-consulting"
        class="text-3xl font-bold text-white hover:text-purple-400 transition-colors"
        >AI Consulting</a
      >

      <div
        class="flex flex-col items-center space-y-3 py-4 border-y border-white/10 w-full"
      >
        <span class="text-xs text-gray-500 uppercase tracking-widest"
          >Industries</span
        >
        <a
          href="/industries/home-services"
          class="text-xl font-medium text-gray-300 hover:text-white transition-colors"
          >Home Services</a
        >
        <a
          href="/industries/legal"
          class="text-xl font-medium text-gray-300 hover:text-white transition-colors"
          >Legal</a
        >
        <a
          href="/industries/political"
          class="text-xl font-medium text-gray-300 hover:text-white transition-colors"
          >Political</a
        >
        <a
          href="/industries/ecommerce"
          class="text-xl font-medium text-gray-300 hover:text-white transition-colors"
          >E-commerce</a
        >
      </div>

      <a
        href="/how-we-work"
        class="text-3xl font-bold text-white hover:text-purple-400 transition-colors"
        >How We Work</a
      >
      <a
        href="/results"
        class="text-3xl font-bold text-white hover:text-purple-400 transition-colors"
        >Results</a
      >
      <a
        href="/insights"
        class="text-3xl font-bold text-white hover:text-purple-400 transition-colors"
        >Insights</a
      >
      <a
        href="/contact"
        class="mt-8 px-8 py-4 text-lg font-bold text-black bg-white rounded-full hover:bg-gray-200 shadow-[0_0_20px_rgba(255,255,255,0.4)]"
      >
        Book Strategy Call
      </a>
    </nav>
  </div>
</header>

<script>
  const nav = document.getElementById("main-nav");
  const mobileBtn = document.getElementById("mobile-menu-btn");
  const mobileNav = document.getElementById("mobile-nav");
  let isMenuOpen = false;

  // Dropdown Handling for Desktop
  const dropdownTriggers = document.querySelectorAll(".dropdown-trigger");

  dropdownTriggers.forEach((trigger) => {
    const dropdown = trigger.nextElementSibling;
    const arrow = trigger.querySelector(".dropdown-arrow");
    let timeout: ReturnType<typeof setTimeout>;

    trigger.parentElement?.addEventListener("mouseenter", () => {
      clearTimeout(timeout);
      if (dropdown && dropdown instanceof HTMLElement) {
        dropdown.classList.remove("hidden", "opacity-0", "translate-y-2");
        dropdown.classList.add("flex", "opacity-100", "translate-y-0");
      }
      if (arrow && arrow instanceof HTMLElement)
        arrow.style.transform = "rotate(180deg)";
    });

    trigger.parentElement?.addEventListener("mouseleave", () => {
      timeout = setTimeout(() => {
        if (dropdown && dropdown instanceof HTMLElement) {
          dropdown.classList.remove("flex", "opacity-100", "translate-y-0");
          dropdown.classList.add("hidden", "opacity-0", "translate-y-2");
        }
        if (arrow && arrow instanceof HTMLElement)
          arrow.style.transform = "rotate(0deg)";
      }, 100);
    });
  });

  // Scroll Effect
  window.addEventListener("scroll", () => {
    if (window.scrollY > 20) {
      nav?.classList.add(
        "bg-sky-navy/90",
        "backdrop-blur-md",
        "border-sky-card/30",
        "shadow-2xl",
      );
    } else {
      nav?.classList.remove(
        "bg-sky-navy/90",
        "backdrop-blur-md",
        "border-sky-card/30",
        "shadow-2xl",
      );
    }
  });

  // Mobile Menu Toggle
  mobileBtn?.addEventListener("click", () => {
    isMenuOpen = !isMenuOpen;
    mobileBtn.classList.toggle("active");
    mobileNav?.classList.toggle("translate-x-full");
    document.body.style.overflow = isMenuOpen ? "hidden" : "";
  });
</script>

<style is:global>
  .reveal-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition:
      opacity 0.8s ease-out,
      transform 0.8s ease-out;
  }

  .reveal-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Staggered delays utilities */
  .delay-100 {
    transition-delay: 100ms;
  }
  .delay-200 {
    transition-delay: 200ms;
  }
  .delay-300 {
    transition-delay: 300ms;
  }
</style>
